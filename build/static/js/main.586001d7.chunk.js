(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{166:function(e,t,a){},168:function(e,t,a){},304:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(74),s=a.n(c),i=(a(166),a(23)),u=a.n(i),l=a(103),o=a(49),d=a(15),m=(a(168),"199ecfda-a1f8-463f-89bb-7a698b36b2a1"),j="17ed73f7-f174-415f-89e2-154025a1b5da",b="e743df97-33d9-40f2-a03d-273873dfcd7e",v="6eba5869-2dba-43ad-9fa5-bc60fab6abe9",p="ac255d90-c971-4d69-baa5-be6e6916d255",h="a630a2b6-398e-46ea-b4ce-d019b8afc2a5",O="71442048-a860-49aa-b1c5-a163a3496fdd",x="74ad860b-8e24-4e50-a352-116bb46fd172",f="df54b382-ea92-474a-a5ea-a8a2f4f73878";function g(e){return new TextDecoder("utf-8").decode(e.buffer)}function y(e){return e.getFloat32(0,!0)}function k(){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(u.a.mark((function e(){var t,a,r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.bluetooth){e.next=2;break}throw new Error("Bluetooth wird vom Browser nicht unterst\xfctzt");case 2:return e.next=4,navigator.bluetooth.requestDevice({filters:[{services:[m]}]});case 4:return t=e.sent,e.next=7,t.gatt.connect();case 7:return a=e.sent,e.next=10,a.getPrimaryService(m);case 10:return r=e.sent,e.t0=console,e.next=14,r.getCharacteristics();case 14:return e.t1=e.sent,e.t0.log.call(e.t0,"characteristics",e.t1),e.next=18,r.getCharacteristic(j);case 18:return e.t2=e.sent,e.next=21,r.getCharacteristic(b);case 21:return e.t3=e.sent,e.next=24,r.getCharacteristic(v);case 24:return e.t4=e.sent,e.next=27,r.getCharacteristic(p);case 27:return e.t5=e.sent,e.next=30,r.getCharacteristic(h);case 30:return e.t6=e.sent,e.next=33,r.getCharacteristic(O);case 33:return e.t7=e.sent,e.next=36,r.getCharacteristic(x);case 36:return e.t8=e.sent,e.next=39,r.getCharacteristic(f);case 39:return e.t9=e.sent,n={tempIn1:e.t2,tempIn2:e.t3,tempOut1:e.t4,tempOut2:e.t5,tempTarget:e.t6,voltage:e.t7,batteryStatus:e.t8,coolingMode:e.t9},e.abrupt("return",{getData:function(){return Object(o.a)(u.a.mark((function e(){var t,a,r,c,s,i,l,o,m,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.tempIn1.readValue(),n.tempIn2.readValue(),n.tempOut1.readValue(),n.tempOut2.readValue(),n.tempTarget.readValue(),n.voltage.readValue(),n.batteryStatus.readValue(),n.coolingMode.readValue()]);case 2:return t=e.sent,a=Object(d.a)(t,8),r=a[0],c=a[1],s=a[2],i=a[3],l=a[4],o=a[5],m=a[6],j=a[7],console.log("getData - tempIn1",r),e.abrupt("return",{tempIn1:y(r),tempIn2:y(c),tempOut1:y(s),tempOut2:y(i),tempTarget:y(l),voltage:y(o),batteryStatus:g(m),coolingMode:g(j)});case 14:case"end":return e.stop()}}),e)})))()}});case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=a(306),I=a(154),w=a(155),S=a(310),C=a(157),V=a(7);var D=function(){var e=n.a.useState(null),t=Object(d.a)(e,2),a=t[0],r=t[1],c=n.a.useState("user-click"),s=Object(d.a)(c,2),i=s[0],m=s[1],j=n.a.useState(null),b=Object(d.a)(j,2),v=b[0],p=b[1],h=n.a.useState([]),O=Object(d.a)(h,2),x=O[0],f=O[1],g=n.a.useState({batteryStatus:"test",coolingMode:"test",tempIn1:5,tempIn2:5,tempOut1:24,tempOut2:25,tempTarget:5,voltage:0}),y=Object(d.a)(g,2),N=y[0],D=y[1];function T(){return(T=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m("connecting"),e.prev=1,e.next=4,k();case 4:t=e.sent,p(t),m("connected"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),r(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return n.a.useEffect((function(){if(v){t();var e=setInterval(t,1e4);return function(){return clearInterval(e)}}function t(){return a.apply(this,arguments)}function a(){return(a=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getData();case 2:t=e.sent,D(t),f((function(e){return e.slice(-100).concat(Object(l.a)(Object(l.a)({},t),{},{time:new Date}))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}),[v]),Object(V.jsxs)("div",{className:"App",children:[Object(V.jsxs)("div",{className:"container",children:[Object(V.jsx)("h1",{children:"K\xfchlschrank"}),null!==a&&Object(V.jsxs)("p",{className:"error",children:["Fehler: ",a]}),"user-click"===i&&Object(V.jsx)(V.Fragment,{children:Object(V.jsx)("button",{onClick:function(){return T.apply(this,arguments)},children:"Ger\xe4t koppeln"})})]}),Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)("div",{className:"container",children:Object(V.jsxs)("div",{className:"values",children:[Object(V.jsxs)("div",{className:"value",children:[Object(V.jsx)("div",{className:"value__key",children:"Modus"}),Object(V.jsx)("div",{className:"value__value",children:N.coolingMode})]}),Object(V.jsxs)("div",{className:"value",children:[Object(V.jsx)("div",{className:"value__key",children:"Zieltemparatur"}),Object(V.jsxs)("div",{className:"value__value",children:[N.tempTarget,"\xb0"]})]})]})}),Object(V.jsxs)("div",{className:"container",children:[Object(V.jsxs)("div",{className:"values",children:[Object(V.jsxs)("div",{className:"value",children:[Object(V.jsx)("div",{className:"value__key",children:"Innentemparatur"}),Object(V.jsxs)("div",{className:"value__value",children:[N.tempIn1,"\xb0 / ",N.tempIn2,"\xb0"]})]}),Object(V.jsxs)("div",{className:"value",children:[Object(V.jsx)("div",{className:"value__key",children:"Au\xdfentemparatur"}),Object(V.jsxs)("div",{className:"value__value",children:[N.tempOut1,"\xb0 / ",N.tempOut2,"\xb0"]})]})]}),Object(V.jsxs)(_.a,{data:x,width:900,height:250,children:[Object(V.jsx)(I.a,{dataKey:"time",tickFormatter:function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",second:"2-digit"}))&&void 0!==t?t:"unbekannt"}}),Object(V.jsx)(w.a,{}),Object(V.jsx)(S.a,{stroke:"#eee",strokeDasharray:"5 5"}),Object(V.jsx)(C.a,{type:"monotone",dataKey:"tempIn1",stroke:"var(--primary)",name:"Innentemparatur 1"}),Object(V.jsx)(C.a,{type:"monotone",dataKey:"tempIn2",stroke:"var(--primary)",name:"Innentemparatur 2"}),Object(V.jsx)(C.a,{type:"monotone",dataKey:"tempOut1",stroke:"var(--orange)",name:"Au\xdfentemparatur 1"}),Object(V.jsx)(C.a,{type:"monotone",dataKey:"tempOut2",stroke:"var(--orange)",name:"Au\xdfentemparatur 2"}),Object(V.jsx)(C.a,{type:"monotone",dataKey:"tempTarget",stroke:"var(--green)",name:"Zieltemparatur"})]})]}),Object(V.jsx)("div",{className:"container",children:Object(V.jsxs)("div",{className:"values",children:[Object(V.jsxs)("div",{className:"value",children:[Object(V.jsx)("div",{className:"value__key",children:"Spannung"}),Object(V.jsxs)("div",{className:"value__value",children:[N.voltage,"V"]})]}),Object(V.jsxs)("div",{className:"value",children:[Object(V.jsx)("div",{className:"value__key",children:"Batteriezustand"}),Object(V.jsx)("div",{className:"value__value",children:N.batteryStatus})]})]})})]})]})};s.a.render(Object(V.jsx)(n.a.StrictMode,{children:Object(V.jsx)(D,{})}),document.getElementById("root"))}},[[304,1,2]]]);
//# sourceMappingURL=main.586001d7.chunk.js.map