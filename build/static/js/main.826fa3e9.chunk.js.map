{"version":3,"sources":["connection.ts","App.tsx","index.tsx"],"names":["SERVICE_UID","CHARACTERISTIC_UID","toString","dataView","TextDecoder","decode","buffer","getCooler","a","navigator","bluetooth","Error","requestDevice","filters","services","device","gatt","connect","server","getPrimaryService","service","getCharacteristic","characteristic","readValue","App","React","useState","error","setError","state","setState","cooler","setCooler","value","data","setData","message","update","result","useEffect","updateTimer","setInterval","clearInterval","className","onClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"kOACMA,G,MAAc,wCACdC,EAAqB,uCAE3B,SAASC,EAASC,GAEd,OADgB,IAAIC,YAAY,SACjBC,OAAOF,EAASG,QAE5B,SAAeC,IAAtB,+B,4CAAO,kCAAAC,EAAA,yDACCC,UAAUC,UADX,sBAEO,IAAIC,MAAM,8CAFjB,uBAIkBF,UAAUC,UAAUE,cAAc,CAAEC,QAAS,CAC9D,CAAEC,SAAU,CAACd,OALd,cAIGe,EAJH,gBAQkBA,EAAOC,KAAMC,UAR/B,cAQGC,EARH,iBASmBA,EAAOC,kBAAkBnB,GAT5C,eASGoB,EATH,iBAU0BA,EAAQC,kBAAkBpB,GAVpD,eAUGqB,EAVH,yBAYI,CACGD,kBADH,WACwB,OAAD,gHACfnB,EADe,SACAoB,EAAeC,YADf,4GAb3B,6C,iCC6CQC,MAjDf,WAAgB,IAAD,EACaC,IAAMC,SAAwB,MAD3C,mBACNC,EADM,KACCC,EADD,OAEaH,IAAMC,SAAoD,cAFvE,mBAENG,EAFM,KAECC,EAFD,OAIeL,IAAMC,SAA0D,MAJ/E,mBAINK,EAJM,KAIEC,EAJF,OAMWP,IAAMC,SAA4B,CAAEO,MAAO,KANtD,mBAMNC,EANM,KAMAC,EANA,iDAQb,4BAAA3B,EAAA,6DACIsB,EAAS,cADb,kBAG2BvB,IAH3B,OAGYwB,EAHZ,OAIMC,EAAUD,GACVD,EAAS,aALf,gDAOMF,EAAS,KAAMQ,SAPrB,0DARa,+BAmBEC,IAnBF,2EAmBb,4BAAA7B,EAAA,sEACuBuB,EAAQV,oBAD/B,OACQiB,EADR,OAEEH,EAAQ,CAAEF,MAAOK,IAFnB,4CAnBa,sBA+Bb,OAPAb,IAAMc,WAAU,WACd,GAAIR,EAAJ,CAEA,IAAMS,EAAcC,YAAYJ,EAAQ,KACxC,OAAO,kBAAMK,cAAcF,OAC1B,CAACT,EAAQM,IAGV,sBAAKM,UAAU,MAAf,UACE,gDAEW,OAAVhB,GAAkB,yCAAYA,KACpB,eAAVE,GAA0B,mDAChB,eAAVA,GAA0B,mCACzB,wBAAQe,QAtCD,2CAsCP,qBAIS,cAAVf,GAAyB,mCACxB,uCAAUK,EAAKD,eC1CvBY,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.826fa3e9.chunk.js","sourcesContent":["\nconst SERVICE_UID = \"199ecfda-a1f8-463f-89bb-7a698b36b2a1\";\nconst CHARACTERISTIC_UID = \"17ed73f7-f174-415f-89e2-154025a1b5da\";\n\nfunction toString(dataView: DataView) {\n    const decoder = new TextDecoder(\"utf-8\");\n    return decoder.decode(dataView.buffer);\n}\nexport async function getCooler() {\n    if(!navigator.bluetooth)\n        throw new Error(\"Bluetooth is not supported by this browser\");\n\n    const device = await navigator.bluetooth.requestDevice({ filters: [\n        { services: [SERVICE_UID] }\n    ]});\n\n    const server = await device.gatt!.connect();\n    const service = await server.getPrimaryService(SERVICE_UID);\n    const characteristic = await service.getCharacteristic(CHARACTERISTIC_UID);\n\n    return {\n        async getCharacteristic() {\n            return toString(await characteristic.readValue());\n        },\n    };\n}","import React from 'react';\nimport './App.css';\nimport { getCooler } from './connection';\n\nfunction App() {\n  const [error, setError] = React.useState<string | null>(null);\n  const [state, setState] = React.useState<\"user-click\" | \"connecting\" | \"connected\">(\"user-click\");\n\n  const [cooler, setCooler] = React.useState<{ getCharacteristic: () => Promise<any>} | null>(null);\n\n  const [data, setData] = React.useState<{ value: string }>({ value: \"\" });\n\n  async function start() {\n      setState(\"connecting\");\n      try {\n        const cooler = await getCooler();\n        setCooler(cooler);\n        setState(\"connected\");\n      } catch(error) {\n        setError(error.message);\n      }\n  }\n\n  async function update() {\n    const result = await cooler!.getCharacteristic();\n    setData({ value: result });\n  }\n\n  React.useEffect(() => {\n    if(!cooler) return;\n\n    const updateTimer = setInterval(update, 10_000);\n    return () => clearInterval(updateTimer);\n  }, [cooler, update]);\n\n  return (\n    <div className=\"App\">\n      <h1>KÃ¼hlschrank</h1>\n\n      {error !== null && <p>Fehler: {error}</p>}\n      {state === \"connecting\" && <>verbinde...</>}\n      {state === \"user-click\" && <>\n        <button onClick={start}>\n          Start\n        </button>\n      </>}\n      {state === \"connected\" && <>\n        <p>Data: {data.value}</p>\n      </>}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}